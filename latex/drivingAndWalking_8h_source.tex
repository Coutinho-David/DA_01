\doxysection{driving\+And\+Walking.\+h}
\hypertarget{drivingAndWalking_8h_source}{}\label{drivingAndWalking_8h_source}\mbox{\hyperlink{drivingAndWalking_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ DRIVING\_WALKING\_ROUTE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ DRIVING\_WALKING\_ROUTE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dijkstra_8h}{dijkstra.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ std::string\ \mbox{\hyperlink{drivingAndWalking_8h_a6e302a909d2b61956f70dcf8f6be3273}{drivingAndWalkingRoute}}(\mbox{\hyperlink{classGraph}{Graph<int>}}\ g,\ \textcolor{keywordtype}{int}\ s,\ \textcolor{keywordtype}{int}\ t,\ \textcolor{keywordtype}{int}\ maxWalkTime,\ }
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<int>\ avoidNodes\ =\ \{\},\ }
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<int,\ int>>\ avoidSegments\ =\ \{\})\ \{}
\DoxyCodeLine{00013\ \ \ \ \ }
\DoxyCodeLine{00014\ \ \ \ \ std::vector<std::tuple<int,\ int,\ int,\ int>>\ removedEdges;}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{int}\ bestParkNode\ =\ -\/1;}
\DoxyCodeLine{00017\ \ \ \ \ std::vector<int>\ \mbox{\hyperlink{dijkstra_8h_aa10bd97713670c3bf2f6f14f19b2ac57}{bestDrivingRoute}};}
\DoxyCodeLine{00018\ \ \ \ \ std::vector<int>\ bestWalkingRoute;}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{int}\ bestDrivingTime\ =\ 0;}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{int}\ bestWalkingTime\ =\ 0;}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{int}\ bestTotalTime\ =\ std::numeric\_limits<int>::max();}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ parkVertex\ :\ g.\mbox{\hyperlink{classGraph_a41624b03fcb6bd29e4df574a1ec58541}{getVertexSet}}())\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ not\ a\ parking\ node}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!parkVertex-\/>isParking())\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ driving\ route\ to\ parking\ node\ (using\ weight1\ -\/\ driving\ time)}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dijkstra_8h_a9d799af5f93fc7ff08f75e65b9df75f6}{dijkstra\_driving}}(\&g,\ s);}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ drivingPath\ =\ getPath(\&g,\ s,\ parkVertex-\/>getInfo());}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ drivingTime\ =\ parkVertex-\/>getDist();}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ driving\ path\ is\ impossible}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drivingPath.empty())\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ walking\ route\ from\ parking\ node\ to\ destination\ (using\ weight2\ -\/\ walking\ time)}}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dijkstra_8h_a56a6f3cff304c83a461eff536d8f91b8}{dijkstra\_walking}}(\&g,\ parkVertex-\/>getInfo());}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ walkingPath\ =\ getPath(\&g,\ parkVertex-\/>getInfo(),\ t);}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ walkingTime\ =\ g.\mbox{\hyperlink{classGraph_a8b7b7465fbfd562e2a469f90a437ab75}{findVertex}}(t)-\/>getDist();}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ walking\ path\ is\ impossible}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (walkingPath.empty())\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ walking\ time\ constraint}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (walkingTime\ >\ maxWalkTime)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ best\ route\ if\ this\ route\ is\ better}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ totalTime\ =\ drivingTime\ +\ walkingTime;}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (totalTime\ <\ bestTotalTime\ ||\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ (totalTime\ ==\ bestTotalTime\ \&\&\ walkingTime\ >\ bestWalkingTime))\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ bestTotalTime\ =\ totalTime;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ bestParkNode\ =\ parkVertex-\/>getInfo();}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ bestDrivingTime\ =\ drivingTime;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ bestWalkingTime\ =\ walkingTime;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Store\ paths\ separately}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dijkstra_8h_aa10bd97713670c3bf2f6f14f19b2ac57}{bestDrivingRoute}}\ =\ drivingPath;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ bestWalkingRoute\ =\ walkingPath;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Restore\ removed\ nodes\ and\ segments}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&[u,\ v,\ w1,\ w2]\ :\ removedEdges)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ g.\mbox{\hyperlink{classGraph_a08ab47109bfe7f197a0a7e794c91a0fd}{addEdge}}(u,\ v,\ w1,\ w2);}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ Format\ output}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (bestParkNode\ ==\ -\/1)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}DrivingAndWalkingRoute:none"{}};}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ std::ostringstream\ result;}
\DoxyCodeLine{00072\ \ \ \ \ }
\DoxyCodeLine{00073\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}DrivingRoute:"{}};}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{dijkstra_8h_aa10bd97713670c3bf2f6f14f19b2ac57}{bestDrivingRoute}}.size();\ i++)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ result\ <<\ \mbox{\hyperlink{dijkstra_8h_aa10bd97713670c3bf2f6f14f19b2ac57}{bestDrivingRoute}}[i];}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ !=\ \mbox{\hyperlink{dijkstra_8h_aa10bd97713670c3bf2f6f14f19b2ac57}{bestDrivingRoute}}.size()\ -\/\ 1)\ result\ <<\ \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ bestDrivingTime\ <<\ \textcolor{stringliteral}{"{})\(\backslash\)n"{}};}
\DoxyCodeLine{00079\ \ \ \ \ }
\DoxyCodeLine{00080\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}ParkingNode:"{}}\ <<\ bestParkNode\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00081\ \ \ \ \ }
\DoxyCodeLine{00082\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}WalkingRoute:"{}};}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ bestWalkingRoute.size();\ i++)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ result\ <<\ bestWalkingRoute[i];}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ !=\ bestWalkingRoute.size()\ -\/\ 1)\ result\ <<\ \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ bestWalkingTime\ <<\ \textcolor{stringliteral}{"{})\(\backslash\)n"{}};}
\DoxyCodeLine{00088\ \ \ \ \ }
\DoxyCodeLine{00089\ \ \ \ \ result\ <<\ \textcolor{stringliteral}{"{}TotalTime:"{}}\ <<\ bestTotalTime;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{return}\ result.str();}
\DoxyCodeLine{00092\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ DRIVING\_WALKING\_ROUTE\_H}}

\end{DoxyCode}
